import{k as _,j as w}from"./index-kEMBa234.js";import{r as H}from"./icons-BrVv_MI0.js";import"./react-vendor-DDxydHEc.js";import"./ui-utils-BznqKjY6.js";function X(n,e){let o;if(e===void 0)for(const r of n)r!=null&&(o<r||o===void 0&&r>=r)&&(o=r);else{let r=-1;for(let c of n)(c=e(c,++r,n))!=null&&(o<c||o===void 0&&c>=c)&&(o=c)}return o}function ct(n,e){let o;if(e===void 0)for(const r of n)r!=null&&(o>r||o===void 0&&r>=r)&&(o=r);else{let r=-1;for(let c of n)(c=e(c,++r,n))!=null&&(o>c||o===void 0&&c>=c)&&(o=c)}return o}function U(n,e){let o=0;if(e===void 0)for(let r of n)(r=+r)&&(o+=r);else{let r=-1;for(let c of n)(c=+e(c,++r,n))&&(o+=c)}return o}function lt(n,e){return n.sourceLinks.length?n.depth:e-1}function R(n){return function(){return n}}function Y(n,e){return P(n.source,e.source)||n.index-e.index}function tt(n,e){return P(n.target,e.target)||n.index-e.index}function P(n,e){return n.y0-e.y0}function V(n){return n.value}function at(n){return n.index}function ft(n){return n.nodes}function ht(n){return n.links}function nt(n,e){const o=n.get(e);if(!o)throw new Error("missing: "+e);return o}function et({nodes:n}){for(const e of n){let o=e.y0,r=o;for(const c of e.sourceLinks)c.y0=o+c.width/2,o+=c.width;for(const c of e.targetLinks)c.y1=r+c.width/2,r+=c.width}}function dt(){let n=0,e=0,o=1,r=1,c=24,x=8,h,d=at,y=lt,v,m,s=ft,k=ht,L=6;function g(){const t={nodes:s.apply(null,arguments),links:k.apply(null,arguments)};return I(t),C(t),S(t),T(t),W(t),et(t),t}g.update=function(t){return et(t),t},g.nodeId=function(t){return arguments.length?(d=typeof t=="function"?t:R(t),g):d},g.nodeAlign=function(t){return arguments.length?(y=typeof t=="function"?t:R(t),g):y},g.nodeSort=function(t){return arguments.length?(v=t,g):v},g.nodeWidth=function(t){return arguments.length?(c=+t,g):c},g.nodePadding=function(t){return arguments.length?(x=h=+t,g):x},g.nodes=function(t){return arguments.length?(s=typeof t=="function"?t:R(t),g):s},g.links=function(t){return arguments.length?(k=typeof t=="function"?t:R(t),g):k},g.linkSort=function(t){return arguments.length?(m=t,g):m},g.size=function(t){return arguments.length?(n=e=0,o=+t[0],r=+t[1],g):[o-n,r-e]},g.extent=function(t){return arguments.length?(n=+t[0][0],o=+t[1][0],e=+t[0][1],r=+t[1][1],g):[[n,e],[o,r]]},g.iterations=function(t){return arguments.length?(L=+t,g):L};function I({nodes:t,links:a}){for(const[l,i]of t.entries())i.index=l,i.sourceLinks=[],i.targetLinks=[];const u=new Map(t.map((l,i)=>[d(l,i,t),l]));for(const[l,i]of a.entries()){i.index=l;let{source:f,target:p}=i;typeof f!="object"&&(f=i.source=nt(u,f)),typeof p!="object"&&(p=i.target=nt(u,p)),f.sourceLinks.push(i),p.targetLinks.push(i)}if(m!=null)for(const{sourceLinks:l,targetLinks:i}of t)l.sort(m),i.sort(m)}function C({nodes:t}){for(const a of t)a.value=a.fixedValue===void 0?Math.max(U(a.sourceLinks,V),U(a.targetLinks,V)):a.fixedValue}function S({nodes:t}){const a=t.length;let u=new Set(t),l=new Set,i=0;for(;u.size;){for(const f of u){f.depth=i;for(const{target:p}of f.sourceLinks)l.add(p)}if(++i>a)throw new Error("circular link");u=l,l=new Set}}function T({nodes:t}){const a=t.length;let u=new Set(t),l=new Set,i=0;for(;u.size;){for(const f of u){f.height=i;for(const{source:p}of f.targetLinks)l.add(p)}if(++i>a)throw new Error("circular link");u=l,l=new Set}}function M({nodes:t}){const a=X(t,i=>i.depth)+1,u=(o-n-c)/(a-1),l=new Array(a);for(const i of t){const f=Math.max(0,Math.min(a-1,Math.floor(y.call(null,i,a))));i.layer=f,i.x0=n+f*u,i.x1=i.x0+c,l[f]?l[f].push(i):l[f]=[i]}if(v)for(const i of l)i.sort(v);return l}function A(t){const a=ct(t,u=>(r-e-(u.length-1)*h)/U(u,V));for(const u of t){let l=e;for(const i of u){i.y0=l,i.y1=l+i.value*a,l=i.y1+h;for(const f of i.sourceLinks)f.width=f.value*a}l=(r-l+h)/(u.length+1);for(let i=0;i<u.length;++i){const f=u[i];f.y0+=l*(i+1),f.y1+=l*(i+1)}rt(u)}}function W(t){const a=M(t);h=Math.min(x,(r-e)/(X(a,u=>u.length)-1)),A(a);for(let u=0;u<L;++u){const l=Math.pow(.99,u),i=Math.max(1-l,(u+1)/L);N(a,l,i),G(a,l,i)}}function G(t,a,u){for(let l=1,i=t.length;l<i;++l){const f=t[l];for(const p of f){let D=0,b=0;for(const{source:E,value:q}of p.targetLinks){let $=q*(p.layer-E.layer);D+=st(E,p)*$,b+=$}if(!(b>0))continue;let B=(D/b-p.y0)*a;p.y0+=B,p.y1+=B,K(p)}v===void 0&&f.sort(P),z(f,u)}}function N(t,a,u){for(let l=t.length,i=l-2;i>=0;--i){const f=t[i];for(const p of f){let D=0,b=0;for(const{target:E,value:q}of p.sourceLinks){let $=q*(E.layer-p.layer);D+=ut(p,E)*$,b+=$}if(!(b>0))continue;let B=(D/b-p.y0)*a;p.y0+=B,p.y1+=B,K(p)}v===void 0&&f.sort(P),z(f,u)}}function z(t,a){const u=t.length>>1,l=t[u];J(t,l.y0-h,u-1,a),F(t,l.y1+h,u+1,a),J(t,r,t.length-1,a),F(t,e,0,a)}function F(t,a,u,l){for(;u<t.length;++u){const i=t[u],f=(a-i.y0)*l;f>1e-6&&(i.y0+=f,i.y1+=f),a=i.y1+h}}function J(t,a,u,l){for(;u>=0;--u){const i=t[u],f=(i.y1-a)*l;f>1e-6&&(i.y0-=f,i.y1-=f),a=i.y0-h}}function K({sourceLinks:t,targetLinks:a}){if(m===void 0){for(const{source:{sourceLinks:u}}of a)u.sort(tt);for(const{target:{targetLinks:u}}of t)u.sort(Y)}}function rt(t){if(m===void 0)for(const{sourceLinks:a,targetLinks:u}of t)a.sort(tt),u.sort(Y)}function st(t,a){let u=t.y0-(t.sourceLinks.length-1)*h/2;for(const{target:l,width:i}of t.sourceLinks){if(l===a)break;u+=i+h}for(const{source:l,width:i}of a.targetLinks){if(l===t)break;u-=i}return u}function ut(t,a){let u=a.y0-(a.targetLinks.length-1)*h/2;for(const{source:l,width:i}of a.targetLinks){if(l===t)break;u+=i+h}for(const{target:l,width:i}of t.sourceLinks){if(l===a)break;u-=i}return u}return g}var O=Math.PI,Z=2*O,j=1e-6,gt=Z-j;function Q(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function it(){return new Q}Q.prototype=it.prototype={constructor:Q,moveTo:function(n,e){this._+="M"+(this._x0=this._x1=+n)+","+(this._y0=this._y1=+e)},closePath:function(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(n,e){this._+="L"+(this._x1=+n)+","+(this._y1=+e)},quadraticCurveTo:function(n,e,o,r){this._+="Q"+ +n+","+ +e+","+(this._x1=+o)+","+(this._y1=+r)},bezierCurveTo:function(n,e,o,r,c,x){this._+="C"+ +n+","+ +e+","+ +o+","+ +r+","+(this._x1=+c)+","+(this._y1=+x)},arcTo:function(n,e,o,r,c){n=+n,e=+e,o=+o,r=+r,c=+c;var x=this._x1,h=this._y1,d=o-n,y=r-e,v=x-n,m=h-e,s=v*v+m*m;if(c<0)throw new Error("negative radius: "+c);if(this._x1===null)this._+="M"+(this._x1=n)+","+(this._y1=e);else if(s>j)if(!(Math.abs(m*d-y*v)>j)||!c)this._+="L"+(this._x1=n)+","+(this._y1=e);else{var k=o-x,L=r-h,g=d*d+y*y,I=k*k+L*L,C=Math.sqrt(g),S=Math.sqrt(s),T=c*Math.tan((O-Math.acos((g+s-I)/(2*C*S)))/2),M=T/S,A=T/C;Math.abs(M-1)>j&&(this._+="L"+(n+M*v)+","+(e+M*m)),this._+="A"+c+","+c+",0,0,"+ +(m*k>v*L)+","+(this._x1=n+A*d)+","+(this._y1=e+A*y)}},arc:function(n,e,o,r,c,x){n=+n,e=+e,o=+o,x=!!x;var h=o*Math.cos(r),d=o*Math.sin(r),y=n+h,v=e+d,m=1^x,s=x?r-c:c-r;if(o<0)throw new Error("negative radius: "+o);this._x1===null?this._+="M"+y+","+v:(Math.abs(this._x1-y)>j||Math.abs(this._y1-v)>j)&&(this._+="L"+y+","+v),o&&(s<0&&(s=s%Z+Z),s>gt?this._+="A"+o+","+o+",0,1,"+m+","+(n-h)+","+(e-d)+"A"+o+","+o+",0,1,"+m+","+(this._x1=y)+","+(this._y1=v):s>j&&(this._+="A"+o+","+o+",0,"+ +(s>=O)+","+m+","+(this._x1=n+o*Math.cos(c))+","+(this._y1=e+o*Math.sin(c))))},rect:function(n,e,o,r){this._+="M"+(this._x0=this._x1=+n)+","+(this._y0=this._y1=+e)+"h"+ +o+"v"+ +r+"h"+-o+"Z"},toString:function(){return this._}};function ot(n){return function(){return n}}function yt(n){return n[0]}function pt(n){return n[1]}var xt=Array.prototype.slice;function vt(n){return n.source}function mt(n){return n.target}function kt(n){var e=vt,o=mt,r=yt,c=pt,x=null;function h(){var d,y=xt.call(arguments),v=e.apply(this,y),m=o.apply(this,y);if(x||(x=d=it()),n(x,+r.apply(this,(y[0]=v,y)),+c.apply(this,y),+r.apply(this,(y[0]=m,y)),+c.apply(this,y)),d)return x=null,d+""||null}return h.source=function(d){return arguments.length?(e=d,h):e},h.target=function(d){return arguments.length?(o=d,h):o},h.x=function(d){return arguments.length?(r=typeof d=="function"?d:ot(+d),h):r},h.y=function(d){return arguments.length?(c=typeof d=="function"?d:ot(+d),h):c},h.context=function(d){return arguments.length?(x=d??null,h):x},h}function Lt(n,e,o,r,c){n.moveTo(e,o),n.bezierCurveTo(e=(e+r)/2,o,e,c,r,c)}function wt(){return kt(Lt)}function _t(n){return[n.source.x1,n.y0]}function Mt(n){return[n.target.x0,n.y1]}function St(){return wt().source(_t).target(Mt)}function It({applicants:n,width:e=800,height:o=400}){const[r,c]=H.useState(null),[x,h]=H.useState(null),d=H.useMemo(()=>{const s=n.length,k=n.reduce((N,z)=>(N[z.status]=(N[z.status]||0)+1,N),{}),L=k["Go Live"]||0,g=L+(k["In Training"]||0)+(k["Invited to Training"]||0),I=g+(k["Interview Scheduled"]||0)+(k["Invited to Interview"]||0);I+(k["Under Review"]||0);const C=s,S=Math.floor(s*.85),T=I,M=g,A=L,W=[{id:"Applications",name:"Applications",color:_("Applied")},{id:"Screening",name:"Screening",color:_("Under Review")},{id:"Interview",name:"Interview",color:_("Interview Scheduled")},{id:"Training",name:"Training",color:_("In Training")},{id:"Active",name:"Active Workforce",color:_("Go Live")},{id:"Dropped",name:"Dropped / Declined",color:_("Declined")}],G=[{source:"Applications",target:"Screening",value:S,color:_("Applied","light")},{source:"Applications",target:"Dropped",value:C-S,color:"#e5e7eb"},{source:"Screening",target:"Interview",value:T,color:_("Under Review","light")},{source:"Screening",target:"Dropped",value:S-T,color:"#e5e7eb"},{source:"Interview",target:"Training",value:M,color:_("Interview Scheduled","light")},{source:"Interview",target:"Dropped",value:T-M,color:"#e5e7eb"},{source:"Training",target:"Active",value:A,color:_("In Training","light")},{source:"Training",target:"Dropped",value:M-A,color:"#e5e7eb"}];return{nodes:W,links:G}},[n]),y=dt().nodeId(s=>s.id).nodeWidth(15).nodePadding(20).extent([[1,1],[e-1,o-25]]),{nodes:v,links:m}=H.useMemo(()=>{const s=d.nodes.map(L=>({...L})),k=d.links.map(L=>({...L}));return y({nodes:s,links:k})},[d,e,o,y]);return w.jsx("div",{className:"relative w-full overflow-visible",children:w.jsxs("svg",{width:"100%",height:o,viewBox:`0 0 ${e} ${o}`,children:[w.jsx("defs",{children:w.jsxs("radialGradient",{id:"nodeGradient",children:[w.jsx("stop",{offset:"0%",stopColor:"rgba(255,255,255,0.2)"}),w.jsx("stop",{offset:"100%",stopColor:"rgba(0,0,0,0)"})]})}),w.jsx("g",{fill:"none",strokeOpacity:.5,children:m.map((s,k)=>w.jsx("path",{d:St()(s)||void 0,stroke:s.color,strokeWidth:Math.max(1,s.width||0),strokeOpacity:x===k||r===s.source.id||r===s.target.id?.8:.4,style:{transition:"stroke-opacity 0.3s ease"},onMouseEnter:()=>h(k),onMouseLeave:()=>h(null),children:w.jsx("title",{children:`${s.source.name} â†’ ${s.target.name}
${s.value} Applicants`})},k))}),w.jsx("g",{children:v.map(s=>w.jsxs("g",{onMouseEnter:()=>c(s.id),onMouseLeave:()=>c(null),children:[w.jsx("rect",{x:s.x0,y:s.y0,height:(s.y1||0)-(s.y0||0),width:(s.x1||0)-(s.x0||0),fill:s.color,rx:4,children:w.jsx("title",{children:`${s.name}
${s.value} Applicants`})}),w.jsx("text",{x:s.x0&&s.x0<e/2?(s.x1||0)+6:(s.x0||0)-6,y:((s.y1||0)+(s.y0||0))/2,dy:"0.35em",textAnchor:s.x0&&s.x0<e/2?"start":"end",fontSize:12,fontWeight:"500",fill:"#374151",className:"pointer-events-none select-none",children:s.name}),w.jsx("text",{x:s.x0&&s.x0<e/2?(s.x1||0)+6:(s.x0||0)-6,y:((s.y1||0)+(s.y0||0))/2+14,dy:"0.35em",textAnchor:s.x0&&s.x0<e/2?"start":"end",fontSize:11,fill:"#6b7280",className:"pointer-events-none select-none",children:s.value})]},s.id))})]})})}export{It as SankeyChart};
