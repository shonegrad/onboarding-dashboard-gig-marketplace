import{j as w}from"./index-kEMBa234.js";import{r as d}from"./icons-BrVv_MI0.js";import{g as k,r as M,j as O,l as Y,i as $,t as q,u as B,o as L,q as N,k as R}from"./d3-charts-5qgYJmbs.js";import"./react-vendor-DDxydHEc.js";import"./ui-utils-BznqKjY6.js";function K({data:n,colors:f}){const u=d.useRef(null),o=d.useRef(null),[a,j]=d.useState({width:0,height:0});return d.useEffect(()=>{if(!o.current)return;const l=new ResizeObserver(e=>{if(!e||e.length===0)return;const{width:h,height:r}=e[0].contentRect;j({width:h,height:r})});return l.observe(o.current),()=>l.disconnect()},[]),d.useEffect(()=>{if(!u.current||!n||a.width===0||a.height===0)return;const l=k(u.current);l.selectAll("*").remove();const e={top:20,right:30,left:40,bottom:30},h=a.width-e.left-e.right,r=a.height-e.top-e.bottom,s=l.append("g").attr("transform",`translate(${e.left},${e.top})`),i=M().domain(n.map(t=>t.date)).range([0,h]).padding(0),m=["applications","screenings","interviews","trainingCompletions","newHires"],g=O().keys(m)(n),y=Y().domain([0,$(g,t=>$(t,c=>c[1]))||0]).nice().range([r,0]),z=q().x(t=>i(t.data.date)).y0(t=>y(t[0])).y1(t=>y(t[1])).curve(B),v=k(o.current).append("div").style("position","absolute").style("visibility","hidden").style("background","white").style("border","1px solid #e2e8f0").style("padding","8px").style("border-radius","4px").style("box-shadow","0 2px 4px rgba(0,0,0,0.1)").style("font-size","12px").style("pointer-events","none").style("z-index","10"),A=f;s.selectAll("path").data(g).join("path").attr("d",z).attr("fill",t=>A[t.key]).attr("fill-opacity",.8);const E=L(i).tickValues(i.domain().filter((t,c)=>c%5===0));s.append("g").attr("transform",`translate(0,${r})`).call(E).style("font-size","11px").style("color","#64748b"),s.append("g").call(N(y).ticks(5)).style("font-size","11px").style("color","#64748b");const X=i.step();s.append("rect").attr("width",h).attr("height",r).attr("fill","transparent").on("mousemove",t=>{const[c,S]=R(t),C=Math.round(c/X),p=n[C];if(!p)return;const[D,H]=R(t,o.current);let b=`<div class="font-bold mb-1">${p.date}</div>`;m.reverse().forEach(x=>{b+=`<div class="flex items-center gap-2"><div style="width:8px;height:8px;background:${f[x]}"></div>${x}: ${p[x]}</div>`}),m.reverse(),v.style("visibility","visible").style("left",D+10+"px").style("top",H-10+"px").html(b),s.selectAll(".cursor-line").remove(),s.append("line").attr("class","cursor-line").attr("x1",i(p.date)).attr("x2",i(p.date)).attr("y1",0).attr("y2",r).attr("stroke","#94a3b8").attr("stroke-dasharray","2,2")}).on("mouseout",()=>{v.style("visibility","hidden"),s.selectAll(".cursor-line").remove()})},[n,a,f]),w.jsx("div",{ref:o,className:"w-full h-full relative",children:w.jsx("svg",{ref:u,width:"100%",height:"100%",style:{overflow:"visible"}})})}export{K as D3PipelineChart};
