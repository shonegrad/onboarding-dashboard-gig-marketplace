import{j as g}from"./index-kEMBa234.js";import{r as p}from"./icons-BrVv_MI0.js";import{g as b,r as D,l as k,i as L,t as m,u as y,v as M,o as O,q as T,w as U,k as w}from"./d3-charts-5qgYJmbs.js";import"./react-vendor-DDxydHEc.js";import"./ui-utils-BznqKjY6.js";function G({data:a}){const h=p.useRef(null),n=p.useRef(null),[l,z]=p.useState({width:0,height:0});return p.useEffect(()=>{if(!n.current)return;const c=new ResizeObserver(r=>{if(!r||r.length===0)return;const{width:d,height:s}=r[0].contentRect;z({width:d,height:s})});return c.observe(n.current),()=>c.disconnect()},[]),p.useEffect(()=>{if(!h.current||!a||l.width===0||l.height===0)return;const c=b(h.current);c.selectAll("*").remove();const r={top:20,right:40,left:40,bottom:30},d=l.width-r.left-r.right,s=l.height-r.top-r.bottom,e=c.append("g").attr("transform",`translate(${r.left},${r.top})`),o=D().domain(a.map(t=>t.date)).range([0,d]).padding(0),f=k().domain([0,L(a,t=>Math.max(t.totalWorkers,t.workersNeeded))||0]).nice().range([s,0]),x=k().domain([0,100]).range([s,0]),v=b(n.current).append("div").style("position","absolute").style("visibility","hidden").style("background","white").style("border","1px solid #e2e8f0").style("padding","8px").style("border-radius","4px").style("box-shadow","0 2px 4px rgba(0,0,0,0.1)").style("font-size","12px").style("pointer-events","none").style("z-index","10"),R=m().x(t=>o(t.date)).y0(s).y1(t=>f(t.totalWorkers)).curve(y),N=m().x(t=>o(t.date)).y0(s).y1(t=>f(t.workersNeeded)).curve(y),$=m().x(t=>o(t.date)).y0(s).y1(t=>x(t.capacityUtilization)).curve(y);e.append("path").datum(a).attr("fill","#818cf8").attr("fill-opacity",.3).attr("d",$),e.append("path").datum(a).attr("fill","#22c55e").attr("fill-opacity",.7).attr("stroke","#22c55e").attr("stroke-width",2).attr("d",R),e.append("path").datum(a).attr("fill","transparent").attr("stroke","#eab308").attr("stroke-width",3).attr("stroke-dasharray","8,4").attr("d",N);const W=M().x(t=>o(t.date)).y(t=>f(t.workersNeeded)).curve(y);e.append("path").datum(a).attr("fill","none").attr("stroke","#eab308").attr("stroke-width",3).attr("stroke-dasharray","8,4").attr("d",W);const j=O(o).tickValues(o.domain().filter((t,u)=>u%5===0));e.append("g").attr("transform",`translate(0,${s})`).call(j).style("font-size","11px").style("color","#64748b"),e.append("g").call(T(f).ticks(5)).style("font-size","11px").style("color","#64748b"),e.append("g").attr("transform",`translate(${d},0)`).call(U(x).ticks(5).tickFormat(t=>t+"%")).style("font-size","11px").style("color","#64748b");const A=o.step();e.append("rect").attr("width",d).attr("height",s).attr("fill","transparent").on("mousemove",t=>{const[u,Y]=w(t),E=Math.round(u/A),i=a[E];if(!i)return;const[C,X]=w(t,n.current);v.style("visibility","visible").style("left",C+10+"px").style("top",X-10+"px").html(`
                        <div class="font-bold mb-1">${i.date}</div>
                        <div style="color:#22c55e">Total Workers: ${i.totalWorkers}</div>
                        <div style="color:#eab308">Needed: ${i.workersNeeded}</div>
                        <div style="color:#818cf8">Capacity: ${i.capacityUtilization}%</div>
                    `),e.selectAll(".cursor-line").remove(),e.append("line").attr("class","cursor-line").attr("x1",o(i.date)).attr("x2",o(i.date)).attr("y1",0).attr("y2",s).attr("stroke","#94a3b8").attr("stroke-dasharray","2,2")}).on("mouseout",()=>{v.style("visibility","hidden"),e.selectAll(".cursor-line").remove()})},[a,l]),g.jsx("div",{ref:n,className:"w-full h-full relative",children:g.jsx("svg",{ref:h,width:"100%",height:"100%",style:{overflow:"visible"}})})}export{G as D3WorkforceChart};
